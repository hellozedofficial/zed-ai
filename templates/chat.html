<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZED - AI Chat</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='chat-style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Mobile Menu Toggle -->
        <button id="menuToggle" class="menu-toggle">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <button class="sidebar-close" id="sidebarClose">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <div class="sidebar-header">
                <div class="logo">Z</div>
                <button id="newChatBtn" class="new-chat-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    New Chat
                </button>
            </div>
            
            <div class="chat-history" id="chatHistory">
                <!-- Chat sessions will be loaded here -->
            </div>
            
            <div class="sidebar-footer">
                <div class="user-info" id="userInfo">
                    <div class="user-avatar">U</div>
                    <span class="user-name">Loading...</span>
                </div>
                <button id="logoutBtn" class="logout-btn">Logout</button>
            </div>
        </aside>

        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Main Chat Area -->
        <main class="main-content">
            <div class="chat-header">
                <h1>ZED</h1>
                <div class="header-actions">
                    <div class="model-select-wrapper">
                        <!-- <input type="text" id="modelSearch" class="model-search" placeholder="Search models..."> -->
                        <select id="modelSelect" class="model-select" size="1">
                            <!-- OpenAI Models -->
                            <optgroup label="OpenAI">
                                <option value="openai.gpt-oss-120b-1:0" selected>OSS 120B (Default)</option>
                                <option value="openai.gpt-oss-20b-1:0">OSS 20B</option>
                            </optgroup>
                            <!-- Claude Models -->
                            <optgroup label="Anthropic Claude">
                                <option value="anthropic.claude-3-sonnet-20240229-v1:0">Claude 3 Sonnet</option>
                                <option value="anthropic.claude-3-5-haiku-20241022-v1:0" disabled>Claude 3.5 Haiku (Requires Inference Profile)</option>
                                <option value="anthropic.claude-3-7-sonnet-20250219-v1:0" disabled>Claude 3.7 Sonnet (Requires Inference Profile)</option>
                            </optgroup>
                            <!-- Amazon Nova Models -->
                            <!-- <optgroup label="Amazon Nova">
                                <option value="amazon.nova-premier-v1:0">Nova Premier</option>
                                <option value="amazon.nova-pro-v1:0">Nova Pro</option>
                                <option value="amazon.nova-2-sonic-v1:0">Nova 2 Sonic</option>
                                <option value="amazon.nova-2-lite-v1:0">Nova 2 Lite</option>
                                <option value="amazon.nova-sonic-v1:0">Nova Sonic</option>
                                <option value="amazon.nova-lite-v1:0">Nova Lite</option>
                                <option value="amazon.nova-micro-v1:0">Nova Micro</option>
                            </optgroup> -->
                            <!-- Meta Llama Models -->
                            <!-- <optgroup label="Meta Llama">
                                <option value="meta.llama4-scout-17b-instruct-v1:0">Llama 4 Scout 17B</option>
                                <option value="meta.llama4-maverick-17b-instruct-v1:0">Llama 4 Maverick 17B</option>
                                <option value="meta.llama3-3-70b-instruct-v1:0">Llama 3.3 70B</option>
                                <option value="meta.llama3-2-90b-instruct-v1:0">Llama 3.2 90B</option>
                                <option value="meta.llama3-1-70b-instruct-v1:0">Llama 3.1 70B</option>
                            </optgroup> -->
                            <!-- Mistral Models -->
                            <!-- <optgroup label="Mistral AI">
                                <option value="mistral.mistral-large-3-675b-instruct">Mistral Large 3</option>
                                <option value="mistral.magistral-small-2509">Magistral Small</option>
                                <option value="mistral.ministral-3-14b-instruct">Ministral 14B</option>
                                <option value="mistral.mixtral-8x7b-instruct-v0:1">Mixtral 8x7B</option>
                            </optgroup> -->
                            <!-- DeepSeek -->
                            <!-- <optgroup label="DeepSeek">
                                <option value="deepseek.r1-v1:0">DeepSeek R1 (Reasoning)</option>
                            </optgroup> -->
                            <!-- Cohere Models -->
                            <!-- <optgroup label="Cohere">
                                <option value="cohere.command-r-plus-v1:0">Command R+</option>
                                <option value="cohere.command-r-v1:0">Command R</option>
                            </optgroup> -->
                            <!-- AI21 Labs -->
                            <!-- <optgroup label="AI21 Labs">
                                <option value="ai21.jamba-1-5-large-v1:0">Jamba 1.5 Large</option>
                                <option value="ai21.jamba-1-5-mini-v1:0">Jamba 1.5 Mini</option>
                            </optgroup> -->
                            <!-- Google Gemma -->
                            <optgroup label="Google">
                                <option value="google.gemma-3-27b-it">Gemma 3 27B</option>
                                <!-- <option value="google.gemma-3-12b-it">Gemma 3 12B</option> -->
                            </optgroup>
                            <!-- Qwen Models -->
                            <!-- <optgroup label="Qwen">
                                <option value="qwen.qwen3-next-80b-a3b">Qwen3 Next 80B</option>
                                <option value="qwen.qwen3-32b-v1:0">Qwen3 32B</option>
                                <option value="qwen.qwen3-coder-30b-a3b-v1:0">Qwen3 Coder 30B</option>
                            </optgroup> -->
                            <!-- MiniMax -->
                            <!-- <optgroup label="MiniMax">
                                <option value="minimax.minimax-m2">MiniMax M2</option>
                            </optgroup> -->
                            <!-- Moonshot -->
                            <!-- <optgroup label="Moonshot AI">
                                <option value="moonshot.kimi-k2-thinking">Kimi K2 (Thinking)</option>
                            </optgroup> -->
                        </select>
                    </div>
                </div>
            </div>

            <div class="chat-container" id="chatContainer">
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-icon">Z</div>
                    <h2>Welcome to ZED</h2>
                    <p>How can I help you today?</p>
                    
                    <div class="example-prompts">
                        <div class="example-prompt" onclick="useExample('Write a Python function to reverse a string')">
                            <h4>Code</h4>
                            <p>Write a Python function to reverse a string</p>
                        </div>
                        <div class="example-prompt" onclick="useExample('Explain AI in 3 simple points')">
                            <h4>Learn</h4>
                            <p>Explain AI in 3 simple points</p>
                        </div>
                        <div class="example-prompt" onclick="useExample('Help me write a professional email')">
                            <h4>Write</h4>
                            <p>Help me write a professional email</p>
                        </div>
                    </div>
                </div>

                <div class="messages" id="messages">
                    <!-- Messages will be dynamically added here -->
                </div>
            </div>

            <div class="input-container">
                <div class="input-wrapper">
                    <textarea 
                        id="userInput" 
                        placeholder="Message ZED (Shift + Enter for new line)" 
                        rows="1"
                    ></textarea>
                    <button id="sendBtn" class="send-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                        </svg>
                    </button>
                </div>
                <div class="input-footer">
                    <span class="powered-by">Powered by HelloZed</span>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Pass session data from backend to JavaScript
        window.initialSessionId = {{ session_id|default('null') }};
        window.initialShareHash = {{ ('"%s"' % share_hash)|safe if share_hash else 'null' }};
    </script>
    <script src="{{ url_for('static', filename='chat-script.js') }}"></script>
</body>
</html>
